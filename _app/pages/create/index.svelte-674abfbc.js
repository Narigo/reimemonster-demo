import{S as V,i as C,s as M,H as K,e as g,t as A,k as T,c as v,a as $,h as U,d as p,m as D,b as y,g as L,F as m,L as O,I as G,J as Q,K as Y,q as P,o as S,G as z,M as le,N as _e,O as X,P as he,Q as me,D as ee,w as F,x as q,y as H,B as j,R as J,v as pe,j as te,T as Z,U as de,V as se,W as ge}from"../../chunks/vendor-ff083dc5.js";function ve(o){let e,s,t,l,n,r,a,c;const f=o[2].default,i=K(f,o,o[1],null);return{c(){e=g("details"),s=g("summary"),t=A("\u2228"),l=T(),n=g("div"),i&&i.c(),this.h()},l(_){e=v(_,"DETAILS",{class:!0});var u=$(e);s=v(u,"SUMMARY",{class:!0});var h=$(s);t=U(h,"\u2228"),h.forEach(p),l=D(u),n=v(u,"DIV",{});var b=$(n);i&&i.l(b),b.forEach(p),u.forEach(p),this.h()},h(){y(s,"class","svelte-17f9h59"),y(e,"class","svelte-17f9h59")},m(_,u){L(_,e,u),m(e,s),m(s,t),m(e,l),m(e,n),i&&i.m(n,null),e.open=o[0],r=!0,a||(c=O(e,"toggle",o[3]),a=!0)},p(_,[u]){i&&i.p&&(!r||u&2)&&G(i,f,_,_[1],r?Y(f,_[1],u,null):Q(_[1]),null),u&1&&(e.open=_[0])},i(_){r||(P(i,_),r=!0)},o(_){S(i,_),r=!1},d(_){_&&p(e),i&&i.d(_),a=!1,c()}}}function $e(o,e,s){let{$$slots:t={},$$scope:l}=e,{open:n=!1}=e;function r(){n=this.open,s(0,n)}return o.$$set=a=>{"open"in a&&s(0,n=a.open),"$$scope"in a&&s(1,l=a.$$scope)},[n,l,t,r]}class be extends V{constructor(e){super();C(this,e,$e,ve,M,{open:0})}}function ye(o){let e,s,t,l,n,r,a,c;return{c(){e=g("ul"),s=g("li"),t=g("button"),l=A("Other poem title"),n=T(),r=g("li"),a=g("button"),c=A("Another poem title"),this.h()},l(f){e=v(f,"UL",{class:!0});var i=$(e);s=v(i,"LI",{});var _=$(s);t=v(_,"BUTTON",{type:!0});var u=$(t);l=U(u,"Other poem title"),u.forEach(p),_.forEach(p),n=D(i),r=v(i,"LI",{});var h=$(r);a=v(h,"BUTTON",{type:!0});var b=$(a);c=U(b,"Another poem title"),b.forEach(p),h.forEach(p),i.forEach(p),this.h()},h(){y(t,"type","button"),y(a,"type","button"),y(e,"class","svelte-15nwzy1")},m(f,i){L(f,e,i),m(e,s),m(s,t),m(t,l),m(e,n),m(e,r),m(r,a),m(a,c)},p:z,i:z,o:z,d(f){f&&p(e)}}}class we extends V{constructor(e){super();C(this,e,null,ye,M,{})}}const Ee=o=>({}),ne=o=>({}),ke=o=>({}),oe=o=>({});function Ie(o){let e,s,t,l,n,r,a;const c=o[2].left,f=K(c,o,o[1],oe),i=o[2].right,_=K(i,o,o[1],ne);return{c(){e=g("div"),f&&f.c(),s=T(),t=g("input"),l=T(),_&&_.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var h=$(e);f&&f.l(h),s=D(h),t=v(h,"INPUT",{type:!0,name:!0,class:!0}),l=D(h),_&&_.l(h),h.forEach(p),this.h()},h(){y(t,"type","text"),y(t,"name","title"),y(t,"class","svelte-iop7bq"),y(e,"class","svelte-iop7bq")},m(u,h){L(u,e,h),f&&f.m(e,null),m(e,s),m(e,t),le(t,o[0]),m(e,l),_&&_.m(e,null),n=!0,r||(a=[O(t,"input",o[6]),O(t,"blur",o[3]),O(t,"change",o[4]),O(t,"focus",o[5])],r=!0)},p(u,[h]){f&&f.p&&(!n||h&2)&&G(f,c,u,u[1],n?Y(c,u[1],h,ke):Q(u[1]),oe),h&1&&t.value!==u[0]&&le(t,u[0]),_&&_.p&&(!n||h&2)&&G(_,i,u,u[1],n?Y(i,u[1],h,Ee):Q(u[1]),ne)},i(u){n||(P(f,u),P(_,u),n=!0)},o(u){S(f,u),S(_,u),n=!1},d(u){u&&p(e),f&&f.d(u),_&&_.d(u),r=!1,_e(a)}}}function Le(o,e,s){let{$$slots:t={},$$scope:l}=e,{value:n=""}=e;function r(i){X.call(this,o,i)}function a(i){X.call(this,o,i)}function c(i){X.call(this,o,i)}function f(){n=this.value,s(0,n)}return o.$$set=i=>{"value"in i&&s(0,n=i.value),"$$scope"in i&&s(1,l=i.$$scope)},[n,l,t,r,a,c,f]}class Te extends V{constructor(e){super();C(this,e,Le,Ie,M,{value:0})}}const re=ee(""),x=ee(""),De=he(x,o=>{const e=[];let s=0;return o.trim().split(/\n/).forEach(t=>{const l=me(t);e.push({syllables:l,okay:s===0||s===l}),s=l}),e}),ae=ee({});function Pe(o){let e,s;const t=o[1].default,l=K(t,o,o[0],null);return{c(){e=g("h2"),l&&l.c(),this.h()},l(n){e=v(n,"H2",{class:!0});var r=$(e);l&&l.l(r),r.forEach(p),this.h()},h(){y(e,"class","svelte-1paot4z")},m(n,r){L(n,e,r),l&&l.m(e,null),s=!0},p(n,[r]){l&&l.p&&(!s||r&1)&&G(l,t,n,n[0],s?Y(t,n[0],r,null):Q(n[0]),null)},i(n){s||(P(l,n),s=!0)},o(n){S(l,n),s=!1},d(n){n&&p(e),l&&l.d(n)}}}function Se(o,e,s){let{$$slots:t={},$$scope:l}=e;return o.$$set=n=>{"$$scope"in n&&s(0,l=n.$$scope)},[l,t]}class Ne extends V{constructor(e){super();C(this,e,Se,Pe,M,{})}}function Oe(){return new Worker("/_app/assets/worker.00d7c8b2.js",{type:"module"})}function ie(o,e,s){const t=o.slice();return t[7]=e[s],t}function We(o){let e;return{c(){e=A(o[0])},l(s){e=U(s,o[0])},m(s,t){L(s,e,t)},p(s,t){t&1&&te(e,s[0])},d(s){s&&p(e)}}}function Ae(o){let e,s=o[2],t=[];for(let l=0;l<s.length;l+=1)t[l]=ce(ie(o,s,l));return{c(){e=g("ul");for(let l=0;l<t.length;l+=1)t[l].c()},l(l){e=v(l,"UL",{});var n=$(e);for(let r=0;r<t.length;r+=1)t[r].l(n);n.forEach(p)},m(l,n){L(l,e,n);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(l,n){if(n&4){s=l[2];let r;for(r=0;r<s.length;r+=1){const a=ie(l,s,r);t[r]?t[r].p(a,n):(t[r]=ce(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(l){l&&p(e),de(t,l)}}}function Ue(o){let e,s;return{c(){e=g("span"),s=A("loading ...")},l(t){e=v(t,"SPAN",{});var l=$(e);s=U(l,"loading ..."),l.forEach(p)},m(t,l){L(t,e,l),m(e,s)},p:z,d(t){t&&p(e)}}}function ce(o){let e,s=o[7]+"",t;return{c(){e=g("li"),t=A(s)},l(l){e=v(l,"LI",{});var n=$(e);t=U(n,s),n.forEach(p)},m(l,n){L(l,e,n),m(e,t)},p(l,n){n&4&&s!==(s=l[7]+"")&&te(t,s)},d(l){l&&p(e)}}}function Ve(o){let e,s,t,l;e=new Ne({props:{$$slots:{default:[We]},$$scope:{ctx:o}}});function n(c,f){if(c[1])return Ue;if(c[2])return Ae}let r=n(o),a=r&&r(o);return{c(){F(e.$$.fragment),s=T(),t=g("div"),a&&a.c()},l(c){q(e.$$.fragment,c),s=D(c),t=v(c,"DIV",{});var f=$(t);a&&a.l(f),f.forEach(p)},m(c,f){H(e,c,f),L(c,s,f),L(c,t,f),a&&a.m(t,null),l=!0},p(c,[f]){const i={};f&1025&&(i.$$scope={dirty:f,ctx:c}),e.$set(i),r===(r=n(c))&&a?a.p(c,f):(a&&a.d(1),a=r&&r(c),a&&(a.c(),a.m(t,null)))},i(c){l||(P(e.$$.fragment,c),l=!0)},o(c){S(e.$$.fragment,c),l=!1},d(c){j(e,c),c&&p(s),c&&p(t),a&&a.d()}}}const Ce=750;function Me(o,e,s){let t;J(o,ae,i=>s(5,t=i));let{word:l=""}=e,n=!0,r=[],a=null,c,f=i=>{clearTimeout(c),c=setTimeout(()=>{console.log("posting",{word:i}),s(1,n=!0),a==null||a.postMessage(i)},Ce)};return pe(()=>{const i=_=>{const u=JSON.parse(_.data);Z(ae,t[u.word]=u.rhymes,t),s(2,r=t[l]),s(1,n=!1)};return a=new Oe,a.addEventListener("message",i),()=>{a.removeEventListener("message",i)}}),o.$$set=i=>{"word"in i&&s(0,l=i.word)},o.$$.update=()=>{o.$$.dirty&1&&f(l)},[l,n,r]}class Re extends V{constructor(e){super();C(this,e,Me,Ve,M,{word:0})}}function ue(o,e,s){const t=o.slice();return t[11]=e[s],t}function Be(o){let e,s;return e=new we({}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){H(e,t,l),s=!0},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function Fe(o){let e,s;return e=new be({props:{slot:"right",$$slots:{default:[Be]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,l){H(e,t,l),s=!0},p(t,l){const n={};l&16384&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(P(e.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),s=!1},d(t){j(e,t)}}}function fe(o){let e,s=o[11].syllables+"",t,l,n;return{c(){e=g("li"),t=A(s),l=T(),this.h()},l(r){e=v(r,"LI",{class:!0});var a=$(e);t=U(a,s),l=D(a),a.forEach(p),this.h()},h(){y(e,"class",n=se(o[11].okay?"okay":"different")+" svelte-7vto2p")},m(r,a){L(r,e,a),m(e,t),m(e,l)},p(r,a){a&4&&s!==(s=r[11].syllables+"")&&te(t,s),a&4&&n!==(n=se(r[11].okay?"okay":"different")+" svelte-7vto2p")&&y(e,"class",n)},d(r){r&&p(e)}}}function qe(o){let e,s,t,l,n,r,a,c,f,i,_,u,h,b,R;s=new Te({props:{$$slots:{right:[Fe]},$$scope:{ctx:o}}});let N=o[2],w=[];for(let d=0;d<N.length;d+=1)w[d]=fe(ue(o,N,d));return u=new Re({props:{word:o[1]}}),{c(){e=g("section"),F(s.$$.fragment),t=T(),l=g("div"),n=g("ol");for(let d=0;d<w.length;d+=1)w[d].c();r=T(),a=g("div"),c=g("div"),f=T(),i=g("div"),_=T(),F(u.$$.fragment),this.h()},l(d){e=v(d,"SECTION",{class:!0});var E=$(e);q(s.$$.fragment,E),t=D(E),l=v(E,"DIV",{class:!0});var k=$(l);n=v(k,"OL",{class:!0});var W=$(n);for(let B=0;B<w.length;B+=1)w[B].l(W);W.forEach(p),r=D(k),a=v(k,"DIV",{class:!0});var I=$(a);c=v(I,"DIV",{class:!0,contenteditable:!0}),$(c).forEach(p),I.forEach(p),f=D(k),i=v(k,"DIV",{class:!0}),$(i).forEach(p),k.forEach(p),_=D(E),q(u.$$.fragment,E),E.forEach(p),this.h()},h(){y(n,"class","syllables svelte-7vto2p"),y(c,"class","input svelte-7vto2p"),y(c,"contenteditable",""),y(a,"class","input-wrapper svelte-7vto2p"),y(i,"class","padding-right svelte-7vto2p"),y(l,"class","poem svelte-7vto2p"),y(e,"class","svelte-7vto2p")},m(d,E){L(d,e,E),H(s,e,null),m(e,t),m(e,l),m(l,n);for(let k=0;k<w.length;k+=1)w[k].m(n,null);m(l,r),m(l,a),m(a,c),o[7](c),m(l,f),m(l,i),m(e,_),H(u,e,null),h=!0,b||(R=[O(c,"blur",o[4]),O(c,"focus",o[5]),O(c,"keyup",o[3]),O(l,"click",o[6])],b=!0)},p(d,[E]){const k={};if(E&16384&&(k.$$scope={dirty:E,ctx:d}),s.$set(k),E&4){N=d[2];let I;for(I=0;I<N.length;I+=1){const B=ue(d,N,I);w[I]?w[I].p(B,E):(w[I]=fe(B),w[I].c(),w[I].m(n,null))}for(;I<w.length;I+=1)w[I].d(1);w.length=N.length}const W={};E&2&&(W.word=d[1]),u.$set(W)},i(d){h||(P(s.$$.fragment,d),P(u.$$.fragment,d),h=!0)},o(d){S(s.$$.fragment,d),S(u.$$.fragment,d),h=!1},d(d){d&&p(e),j(s),de(w,d),o[7](null),j(u),b=!1,_e(R)}}}function He(o,e,s){let t,l,n;J(o,x,b=>s(9,t=b)),J(o,re,b=>s(1,l=b)),J(o,De,b=>s(2,n=b));let r=null,a=!1;pe(()=>{console.log({inputField:r,type:typeof r})});function c(){const R=window.getSelection().getRangeAt(0),N=R.commonAncestorContainer;if(N.parentNode===r){const w=N.textContent,d=w.slice(0,R.startOffset),E=w.slice(R.startOffset),k=/\b(\w*)$/.exec(d),W=/^(\w*)\b/.exec(E);Z(re,l=`${k?k[1]:""}${W?W[1]:""}`,l)}}const f=b=>{Z(x,t=r.innerText,t),c()};function i(){a=!1}function _(){a=!0,c()}function u(){a||r.focus()}function h(b){ge[b?"unshift":"push"](()=>{r=b,s(0,r)})}return[r,l,n,f,i,_,u,h]}class je extends V{constructor(e){super();C(this,e,He,qe,M,{})}}function ze(o){let e,s,t;return s=new je({}),{c(){e=g("main"),F(s.$$.fragment),this.h()},l(l){e=v(l,"MAIN",{class:!0});var n=$(e);q(s.$$.fragment,n),n.forEach(p),this.h()},h(){y(e,"class","svelte-78i28p")},m(l,n){L(l,e,n),H(s,e,null),t=!0},p:z,i(l){t||(P(s.$$.fragment,l),t=!0)},o(l){S(s.$$.fragment,l),t=!1},d(l){l&&p(e),j(s)}}}class Ke extends V{constructor(e){super();C(this,e,null,ze,M,{})}}export{Ke as default};
